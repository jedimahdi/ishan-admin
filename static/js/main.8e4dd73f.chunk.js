(this["webpackJsonpcrwn-clothing"]=this["webpackJsonpcrwn-clothing"]||[]).push([[0],{45:function(e,t,a){e.exports=a(95)},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),s=a(20),i=a.n(s),o=(a(52),a(13)),u=a(4),m=a(2),d=a.n(m),p=a(1),b=(a(54),function(e){return l.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}),f=a(12),E=function(e){return{type:"MINLENGTH",val:e}},v=function(e,t){var a=!0,n=!0,l=!1,r=void 0;try{for(var c,s=t[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var i=c.value;"REQUIRE"===i.type&&(a=a&&e.trim().length>0),"MINLENGTH"===i.type&&(a=a&&e.trim().length>=i.val),"MAXLENGTH"===i.type&&(a=a&&e.trim().length<=i.val),"MIN"===i.type&&(a=a&&+e>=i.val),"MAX"===i.type&&(a=a&&+e<=i.val),"EMAIL"===i.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(o){l=!0,r=o}finally{try{n||null==s.return||s.return()}finally{if(l)throw r}}return a},h=(a(55),function(e,t){switch(t.type){case"CHANGE":return Object(f.a)({},e,{value:t.val,isValid:v(t.val,t.validators)});case"TOUCH":return Object(f.a)({},e,{isTouched:!0});default:return e}}),g=function(e){var t=Object(n.useReducer)(h,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),a=Object(p.a)(t,2),r=a[0],c=a[1],s=e.id,i=e.onInput,o=r.value,u=r.isValid;Object(n.useEffect)((function(){i(s,o,u)}),[s,o,u,i]);var m=function(t){c({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){c({type:"TOUCH"})},b="input"===e.element?l.a.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:m,onBlur:d,value:r.value}):l.a.createElement("textarea",{id:e.id,row:e.rows||3,onChange:m,onBlur:d,value:r.value});return l.a.createElement("div",{className:"form-input ".concat(!r.isValid&&r.isTouched&&"form-input--invalid")},l.a.createElement("label",{htmlFor:e.id},e.label),b,!r.isValid&&r.isTouched&&l.a.createElement("p",null,e.errorText))},y=(a(56),function(e){return e.href?l.a.createElement("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href},e.children):e.to?l.a.createElement(u.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger")},e.children):l.a.createElement("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}),x=a(96),C=(a(62),function(e){return c.a.createPortal(l.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),O=(a(63),function(e){var t=l.a.createElement("div",{className:"dialogue ".concat(e.className),style:e.style},l.a.createElement("header",{className:"dialogue__header ".concat(e.headerClass)},l.a.createElement("h2",null,e.header)),l.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"dialogue__content ".concat(e.contentClass)},e.children),l.a.createElement("footer",{className:"dialogue__footer ".concat(e.footerClass)},e.footer)));return c.a.createPortal(t,document.getElementById("modal-hook"))}),N=function(e){return l.a.createElement(l.a.Fragment,null,e.show&&l.a.createElement(C,{onClick:e.onCancel}),l.a.createElement(x.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"dialogue"},l.a.createElement(O,e)))},j=function(e){return l.a.createElement(N,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:l.a.createElement(y,{onClick:e.onClear},"Okay")},l.a.createElement("p",null,e.error))},k=(a(64),function(e){return l.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},l.a.createElement("div",{className:"lds-dual-ring"}))}),w=a(11),S=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(f.a)({},e,{inputs:Object(f.a)({},e.inputs,Object(w.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},I=function(e,t){var a=Object(n.useReducer)(S,{inputs:e,isValid:t}),l=Object(p.a)(a,2),r=l[0],c=l[1];return[r,Object(n.useCallback)((function(e,t,a){c({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(n.useCallback)((function(e,t){c({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},_=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(n.useRef)([]),u=Object(n.useCallback)((function(e){var t,a,n,r,c,s,u=arguments;return d.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:"GET",a=u.length>2&&void 0!==u[2]?u[2]:null,n=u.length>3&&void 0!==u[3]?u[3]:{},l(!0),r=new AbortController,o.current.push(r),m.prev=6,m.next=9,d.a.awrap(fetch(e,{method:t,body:a,headers:n,signal:r.signal}));case 9:return c=m.sent,m.next=12,d.a.awrap(c.json());case 12:if(s=m.sent,o.current=o.current.filter((function(e){return e!==r})),c.ok){m.next=16;break}throw new Error(s.message);case 16:return l(!1),m.abrupt("return",s);case 20:throw m.prev=20,m.t0=m.catch(6),i(m.t0.message),l(!1),m.t0;case 25:case"end":return m.stop()}}),null,null,[[6,20]])}),[]);return Object(n.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:s,sendRequest:u,clearError:function(){i(null)}}},T="http://136.243.32.172/api/v1/",D=Object(n.createContext)({isLoggedIn:!1,login:function(){},logout:function(){}}),A=(a(65),function(){var e=Object(n.useContext)(D),t=_(),a=t.isLoading,r=t.error,c=t.sendRequest,s=t.clearError,i=I({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),o=Object(p.a)(i,2),u=o[0],m=o[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{error:r,onClear:s}),l.a.createElement(b,{className:"authentication"},a&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement("h2",null,"Login Required"),l.a.createElement("hr",null),l.a.createElement("form",{className:"form-signi",onSubmit:function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,d.a.awrap(c("".concat(T,"auth/login"),"POST",JSON.stringify({email:u.inputs.email.value,password:u.inputs.password.value}),{"Content-Type":"application/json"}));case 4:a=n.sent,e.login(a.user.id,a.token.accessToken),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),null,null,[[1,8]])}},l.a.createElement(g,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:"EMAIL"}],errorText:"Please enter a valid email",onInput:m}),l.a.createElement(g,{element:"input",id:"password",type:"password",label:"Password",validators:[E(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:m}),l.a.createElement(y,{type:"submit",disabled:!u.isValid},"LOGIN"))))}),V=(a(66),function(){return l.a.createElement("div",{className:"my-container"},l.a.createElement(b,null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h1",{className:"h2"},"Dashboard"),l.a.createElement("div",{className:"btn-toolbar mb-2 mb-md-0"},l.a.createElement("div",{className:"btn-group mr-2"},l.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary"},"Share"),l.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary"},"Export")),l.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary dropdown-toggle"},l.a.createElement("span",{"data-feather":"calendar"}),"This week")))))}),L=a(41),F=a(15),P=a(16),R=a(18),M=a(17),G=a(19),U=a(25),B=a.n(U),H=a(42),q=function(e){var t=e.onChange,a=e.label,n=e.name,r=Object(H.a)(e,["onChange","label","name"]);return l.a.createElement("div",{className:"form-group"},a?l.a.createElement("label",{htmlFor:n+"Input"},a):null,l.a.createElement("input",Object.assign({className:"form-control",id:n+"Input",name:n,onChange:t},r)))},z=a(40),J=a.n(z).a.create({baseURL:T}),Y=function(e){function t(){var e;return Object(F.a)(this,t),(e=Object(R.a)(this,Object(M.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.value,l=a.name;e.setState(Object(w.a)({},l,n))},e.handleDeleteSetting=function(t){J.delete("settings/".concat(t)).then(console.log),e.setState({settings:e.state.settings.filter((function(e){return e._id!==t}))})},e.handleSettingInputChange=function(t){var a=t.target,n=a.value,l=a.name,r=e.state.settings;r=r.map((function(e){return e.key===l&&(e.value=n),e})),e.setState({settings:r})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.settings;console.log(a),J.patch("settings",{settings:a}).then(console.log)},e.handleCreateSettings=function(t){t.preventDefault();var a={key:e.state.key,value:e.state.value};J.post("settings",Object(f.a)({},a)).then((function(e){return console.log(e)})),e.setState({settings:[].concat(Object(L.a)(e.state.settings),[a]),key:"",value:""})},e.onSelectArticleChange=function(t){e.setState({selected_articles:t});var a=e.state.settings;a.find((function(e){return"homepage_articles"===e.key})).value=t.join(","),e.setState({settings:a})},e.onSelectInsCommentChange=function(t){e.setState({selected_ins_comments:t});var a=e.state.settings;a.find((function(e){return"homepage_instructor_comments"===e.key})).value=t.join(","),e.setState({settings:a})},e.state={settings:[],articles:[],selected_articles:[],ins_comments:[],selected_ins_comments:[],key:"",value:""},e}return Object(G.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;J.get("settings").then((function(t){var a=t.data;e.setState({settings:a});var n=a.find((function(e){return"homepage_articles"===e.key}));""!==n.value&&e.setState({selected_articles:n.value.split(",")});var l=a.find((function(e){return"homepage_instructor_comments"===e.key}));""!==l.value&&e.setState({selected_ins_comments:l.value.split(",")})})),J.get("articles").then((function(t){var a=t.data.map((function(e){return{label:e.title,value:e._id}}));e.setState({articles:a})})),J.get("ins_comments").then((function(t){var a=t.data.map((function(e){return{label:e.name,value:e._id}}));e.setState({ins_comments:a})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"settings my-container"},l.a.createElement(b,null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Settings")),this.state.settings.map((function(t){return l.a.createElement("div",{className:"row align-items-center",key:t._id},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(q,{label:t.key.split("_").join(" "),name:t.key,onChange:e.handleSettingInputChange,value:e.state.settings.find((function(e){return e.key===t.key})).value,readOnly:t.readonly})))})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"selectArticle"},"Select articles for homepage"),l.a.createElement(B.a,{options:this.state.articles,selected:this.state.selected_articles,onSelectedChanged:this.onSelectArticleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"selectInsComment"},"Select instructor comments for homepage"),l.a.createElement(B.a,{options:this.state.ins_comments,selected:this.state.selected_ins_comments,onSelectedChanged:this.onSelectInsCommentChange})),l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-dark"},"Update Settings"),l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Create New Settings")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(q,{label:"Settings key",name:"key",onChange:this.handleChange,value:this.state.key})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(q,{label:"Settings value",name:"value",onChange:this.handleChange,value:this.state.value}))),l.a.createElement("button",{onClick:this.handleCreateSettings,className:"btn btn-dark mb-4"},"Create")))}}]),t}(l.a.Component),Q=Object(o.i)((function(e){var t=e.data,a=e.url,r=e.title,c=e.names,s=e.handleDeleteItem,o=e.history,u=Object(n.useState)(!1),m=Object(p.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)(null),E=Object(p.a)(f,2),v=E[0],h=E[1],g=function(){b(!1),h(null)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,{show:d,onCancel:g,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(y,{inverse:!0,onClick:g},"CANCEL"),l.a.createElement(y,{danger:!0,onClick:function(){null!=v&&s(v),g(),console.log("DELETE...")}},"DELETE"))}),l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3"},l.a.createElement("h2",null,r),l.a.createElement("div",{className:"btn-toolbar mb-2 mb-md-0"},l.a.createElement("div",{className:"btn-group mr-2"},l.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:function(){return o.push("/".concat(a,"/create"))}},"Create ",r)))),t&&0!==t.length?l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-striped table-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,Object.keys(t[0]).map((function(e){return c.includes(e)?l.a.createElement("th",{key:e},e):null})),l.a.createElement("th",null,"Created Date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e._id+new Date},Object.keys(e).map((function(t){return c.includes(t)?l.a.createElement("td",{key:t},e[t]):null})),l.a.createElement("td",null,i()(e.createdAt).format("YYYY/MM/DD")),l.a.createElement("td",null,l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{className:"btn btn-secondary btn-sm",onClick:function(){return o.push("/".concat(a,"/edit/").concat(e._id))}},l.a.createElement("i",{className:"fa fa-pencil-square-o"})),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return t=e._id,b(!0),void h(t);var t}},l.a.createElement("i",{className:"fa fa-trash"})))))}))))):l.a.createElement("div",null,"No Data")))})),X=(a(89),Object(o.i)((function(e){e.history;var t=Object(n.useState)(),a=Object(p.a)(t,2),r=a[0],c=a[1],s=_(),i=s.isLoading,o=s.error,u=s.sendRequest,m=s.clearError,f=Object(n.useContext)(D);Object(n.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(u("".concat(T,"articles")));case 3:e=t.sent,c(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[u]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{error:o,onClear:m}),l.a.createElement("div",{className:"my-container"},l.a.createElement(b,null,i&&l.a.createElement("div",{className:"center"},l.a.createElement(k,null)),r&&l.a.createElement(Q,{data:r,handleDeleteItem:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(u("".concat(T,"articles/").concat(e),"DELETE",null,{Authorization:"Bearer "+f.token}));case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:c(r.filter((function(t){return t._id!==e})));case 8:case"end":return t.stop()}}),null,null,[[0,5]])},names:["title","author"],url:"articles",title:"Articles"}))))}))),K=(a(90),function(e){var t=Object(n.useState)(),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),i=Object(p.a)(s,2),o=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(p.a)(m,2),b=d[0],f=d[1],E=Object(n.useRef)();Object(n.useEffect)((function(){if(r){var e=new FileReader;e.onload=function(){u(e.result)},e.readAsDataURL(r)}}),[r]);return l.a.createElement("div",{className:"form-input"},l.a.createElement("input",{id:e.id,ref:E,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=b;t.target.files&&1===t.target.files.length?(a=t.target.files[0],c(a),f(!0),n=!0):(f(!1),n=!1),e.onInput(e.id,a,n)}}),l.a.createElement("div",{className:"image-upload ".concat(e.center&&"center")},l.a.createElement("div",{className:"image-upload__preview"},o&&l.a.createElement("img",{src:o,alt:"Preview"}),!o&&l.a.createElement("p",null,"Please pick an image.")),l.a.createElement(y,{type:"button",onClick:function(){E.current.click()}},"PICK IMAGE")),!b&&l.a.createElement("p",null,e.errorText))}),$=function(){var e=Object(n.useContext)(D),t=_(),a=t.isLoading,r=t.error,c=t.sendRequest,s=t.clearError,i=I({title:{value:"",isValid:!1},text:{value:"",isValid:!1},file:{value:null,isValid:!1}},!1),u=Object(p.a)(i,2),m=u[0],f=u[1],v=Object(o.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{error:r,onClear:s}),l.a.createElement("div",{className:"create-article my-container"},l.a.createElement(b,null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Create Article")),l.a.createElement("form",{onSubmit:function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,(a=new FormData).append("title",m.inputs.title.value),a.append("text",m.inputs.text.value),a.append("file",m.inputs.file.value),n.next=8,d.a.awrap(c("".concat(T,"articles"),"POST",a,{Authorization:"Bearer "+e.token}));case 8:v.push("/articles"),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(1);case 13:case"end":return n.stop()}}),null,null,[[1,11]])}},a&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement(g,{id:"title",element:"input",type:"text",label:"Title",onInput:f,validators:[{type:"REQUIRE"}],errorText:"Please enter a valid title"}),l.a.createElement(g,{id:"text",element:"textarea",label:"Text",onInput:f,validators:[E(5)],errorText:"Please enter a valid text (at least 5 characters)"}),l.a.createElement(K,{id:"file",onInput:f,errorText:"Please provide a image."}),l.a.createElement(y,{inverse:!0,type:"submit",disabled:!m.isValid},"Create")))))},W=function(){var e=Object(n.useContext)(D),t=_(),a=t.isLoading,r=t.error,c=t.sendRequest,s=t.clearError,i=Object(n.useState)(),u=Object(p.a)(i,2),m=u[0],f=u[1],v=Object(o.h)().articleId,h=Object(o.g)(),x=I({title:{value:"",isValid:!1},text:{value:"",isValid:!1}},!1),C=Object(p.a)(x,3),O=C[0],N=C[1],w=C[2];Object(n.useEffect)((function(){!function(){var e;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(c("".concat(T,"articles/").concat(v)));case 3:e=t.sent,f(e),w({title:{value:e.title,isValid:!0},text:{value:e.text,isValid:!0}},!0),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),null,null,[[0,8]])}()}),[c,v,w]);return a?l.a.createElement("div",{className:"center"},l.a.createElement(k,null)):m||r?l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{error:r,onClear:s}),!a&&m&&l.a.createElement("div",{className:"edit-article my-container"},l.a.createElement(b,null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Edit Article")),l.a.createElement("form",{onSubmit:function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,d.a.awrap(c("".concat(T,"articles/").concat(v),"PATCH",JSON.stringify({title:O.inputs.title.value,text:O.inputs.text.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token}));case 4:h.push("/articles"),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(1);case 9:case"end":return a.stop()}}),null,null,[[1,7]])}},l.a.createElement(g,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],errorText:"Please enter a valid title.",onInput:N,initialValue:m.title,initialValid:!0}),l.a.createElement(g,{id:"text",element:"textarea",label:"Text",validators:[E(5)],errorText:"Please enter a valid text (min. 5 characters).",onInput:N,initialValue:m.text,initialValid:!0}),l.a.createElement(y,{type:"submit",disabled:!O.isValid},"UPDATE ARTICLE"))))):l.a.createElement("div",{className:"center"},l.a.createElement(b,null,l.a.createElement("h2",null,"Could not find place!")))};var Z,ee=function(e){var t=Object(n.useState)(null),a=Object(p.a)(t,2),l=a[0],r=a[1],c=_(),s=c.isLoading,i=c.error,o=c.sendRequest,u=c.clearError,m=Object(n.useContext)(D);return Object(n.useEffect)((function(){!function(){var t;d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.a.awrap(o("".concat(T).concat(e)));case 3:t=a.sent,r(t),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),null,null,[[0,7]])}()}),[o,e]),console.log(l),{data:l,handleDeleteItem:function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.a.awrap(o("".concat(T).concat(e,"/").concat(t),"DELETE",null,{Authorization:"Bearer "+m.token}));case 3:a.next=7;break;case 5:a.prev=5,a.t0=a.catch(0);case 7:r(l.filter((function(e){return e._id!==t})));case 8:case"end":return a.stop()}}),null,null,[[0,5]])},isLoading:s,error:i,clearError:u}},te=function(){var e=ee("ins_comments");return l.a.createElement("div",{className:"my-container"},l.a.createElement(b,null,l.a.createElement(Q,Object.assign({},e,{names:["name"],url:"comments",title:"Comments"}))))},ae=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(R.a)(this,Object(M.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(w.a)({},n,l))},a.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("file",a.state.selectedFile),t.append("name",a.state.name),t.append("text",a.state.text),J.post("ins_comments",t).then((function(e){a.setState({success:!0})})),a.setState({name:"",text:""})},a.onImageChange=function(e){console.log(e.target.files[0]),a.setState({selectedFile:e.target.files[0],loaded:0})},a.state={name:"",text:"",image:"",success:!1,selectedFile:null},a}return Object(G.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"create-comment my-container"},l.a.createElement(b,null,this.state.success?l.a.createElement("div",{className:"alert alert-success mt-4"},"Success"):null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Create Comment")),l.a.createElement(q,{label:"Name",name:"name",value:this.state.name,onChange:this.handleChange}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"textInput"},"Text"),l.a.createElement("textarea",{className:"form-control",name:"text",value:this.state.text,onChange:this.handleChange,id:"textInput",rows:"3"})),l.a.createElement("div",{className:"custom-file mb-4"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",name:"file",onChange:this.onImageChange}),l.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose image file")),l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-dark"},"Create"),l.a.createElement("button",{onClick:function(){return e.props.history.push("/comments")},className:"btn btn-danger"},"Cancel"))))}}]),t}(l.a.Component),ne=Object(o.i)(ae),le=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(R.a)(this,Object(M.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(w.a)({},n,l))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,l=t.text;J.patch("ins_comments/".concat(a.props.match.params.commentId),{name:n,text:l}).then((function(e){a.setState({success:!0})}))},a.state={name:"",text:"",success:!1},a}return Object(G.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=this;J.get("ins_comments/".concat(this.props.match.params.commentId)).then((function(t){var a=t.data,n=a.name,l=a.text;e.setState({name:n,text:l})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"edit-article my-container"},l.a.createElement(b,null,this.state.success?l.a.createElement("div",{className:"alert alert-success mt-4"},"Success"):null,l.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},l.a.createElement("h2",null,"Edit Comment")),l.a.createElement(q,{label:"Name",name:"name",value:this.state.name,handleChange:this.handleChange}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"textInput"},"Text"),l.a.createElement("textarea",{className:"form-control",name:"text",value:this.state.text,onChange:this.handleChange,id:"textInput",rows:"6"})),l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-dark"},"Update"),l.a.createElement("button",{onClick:function(){return e.props.history.push("/comments")},className:"btn btn-danger"},"Cancel"))))}}]),t}(l.a.Component),re=Object(o.i)(le),ce=function(){var e=ee("users");return l.a.createElement("div",{className:"my-container"},l.a.createElement(b,null,l.a.createElement(Q,Object.assign({},e,{names:["name","email"],url:"admins",title:"Admins"}))))},se=(a(91),function(e){return l.a.createElement("header",{className:"main-header"},e.children)}),ie=(a(92),function(e){var t=Object(n.useContext)(D);return t.isLoggedIn?l.a.createElement("ul",{className:"nav-links"},l.a.createElement("li",null,l.a.createElement(u.c,{to:"/",exact:!0},"DASHBOARD")),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/articles"},"ARTICLES")),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/comments"},"COMMENTS")),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/admins"},"ADMINS")),l.a.createElement("li",null,l.a.createElement(u.c,{to:"/settings"},"SETTINGS")),l.a.createElement("li",null,l.a.createElement("button",{onClick:t.logout},"LOGOUT"))):null}),oe=(a(93),function(e){var t=l.a.createElement(x.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},l.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return c.a.createPortal(t,document.getElementById("drawer-hook"))}),ue=(a(94),function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],c=a[1],s=function(){c(!1)};return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(C,{onClick:s}),l.a.createElement(oe,{show:r,onClick:s},l.a.createElement("nav",{className:"main-navigation__drawer-nav"},l.a.createElement(ie,null))),l.a.createElement(se,null,l.a.createElement("button",{className:"main-navigation__menu-btn",onClick:function(){c(!0)}},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement("h1",{className:"main-navigation__title"},l.a.createElement(u.b,{to:"/"},"Panel")),l.a.createElement("nav",{className:"main-navigation__header-nav"},l.a.createElement(ie,null))))}),me=function(){var e,t=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!1),u=Object(p.a)(o,2),m=u[0],d=u[1],b=Object(n.useCallback)((function(e,t,a){l(t),d(e);var n=a||new Date((new Date).getTime()+36e5);i(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),f=Object(n.useCallback)((function(){l(null),i(null),d(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){if(a&&s){var e=s.getTime()-(new Date).getTime();Z=setTimeout(f,e)}else clearTimeout(Z)}),[a,f,s]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&b(e.userId,e.token,new Date(e.expiration))}),[b]),{token:a,login:b,logout:f,userId:m}}(),a=t.token,r=t.login,c=t.logout,s=t.userId;return e=a?l.a.createElement(o.d,null,l.a.createElement(o.b,{exact:!0,path:"/",component:V}),l.a.createElement(o.b,{exact:!0,path:"/articles",component:X}),l.a.createElement(o.b,{path:"/articles/create",component:$}),l.a.createElement(o.b,{path:"/articles/edit/:articleId",component:W}),l.a.createElement(o.b,{exact:!0,path:"/comments",component:te}),l.a.createElement(o.b,{path:"/comments/create",component:ne}),l.a.createElement(o.b,{path:"/comments/edit/:commentId",component:re}),l.a.createElement(o.b,{exact:!0,path:"/admins",component:ce}),l.a.createElement(o.b,{path:"/settings",component:Y}),l.a.createElement(o.a,{to:"/"})):l.a.createElement(o.d,null,l.a.createElement(o.b,{exact:!0,path:"/login",component:A}),l.a.createElement(o.a,{to:"/login"})),l.a.createElement(D.Provider,{value:{isLoggedIn:!!a,token:a,userId:s,login:r,logout:c}},l.a.createElement(u.a,{basename:"/ishan-admin"},l.a.createElement(ue,null),l.a.createElement("main",null,e)))};i.a.locale("fa",{useGregorianParser:!0}),c.a.render(l.a.createElement(me,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.8e4dd73f.chunk.js.map